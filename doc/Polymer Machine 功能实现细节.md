# Polymer Machine 功能实现细节

#### 组件定义

- 组件是一个对象，它表示机器的一个输入输出类型
- 组件容纳一个具体的`Handler`
- 组件提供了具体内容的序列化/反序列化方案（如果有）
- 组件提供了网络同步方案（如果有）
- 组件提供了GUI显示方案（如果有）
- 组件提供了方块需要实现的API
- 在脚本中，组件可以有以下操作
  - `define`：新建一个组件并将组件的序列化等方法与方块绑定
  - `apply`：在要创建的方块中应用该组件的API（Capability或接口）
  - `adapt`：将一种类型的组件适配成另一种类型的组件
  - `export`：（多方快/部件）将一个部件中的组件暴露给其他部件
  - `import`：（多方快/核心）导入一个部件中export的组件
  - `wrapper`：（多方快/核心）将一个非Polymer方块包装为组件
  - `combine`：（多方快/核心）合并同类型的组件
  - `collect`：（多方快/核心）import/wrapper + combine
  - `bridge`：（多方快/核心）将其他部件的IO桥接到核心的组件
- 通常情况下，组件可以和`Capability`等互相转换
- 合成表的一系列参数主要为组件
- 在脚本中检查组件各个方法的调用情况

###### TODO:

- [x] 组件类
- [ ] 实现：物品
- [ ] 实现：流体
- [ ] 实现：能量
- [ ] 懒加载组件

#### 组件容器

- 组件容器是一个对象，它根据脚本的定义构造出来
- 除了`define`的组件全部懒加载
- 组件容器提供以下方法
  - `get`方法：获取组件对象
  - `apply`方法：由方块构造器调用
  - `invalidate`方法：删缓存/（多方快）去除其他部件的bridge
  - `provide`方法：（多方快）组装时候调用，提供其他组件容器的位置
  - `broadcast`方法：（多方快）组装时候调用，将bridge的组件应用到其他部件

#### 方块构造器





